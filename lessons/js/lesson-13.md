
---

### 🧩 درس ۱۳ — متغیرها (Variable) با `let` و `var`: ذخیره‌سازی موقت داده‌ها

(پوشش از صفحهٔ ۸۵ تا صفحهٔ ۸۷)

---

### 🎯 هدف درس:

هدف اصلی این درس این است که یاد بگیریم متغیرها چه هستند و چگونه می‌توانیم با استفاده از کلمات کلیدی `let` و `var` (که کلمات کلیدی جاوااسکریپت هستند)، اطلاعات و داده‌ها را به طور موقت در حافظه کامپیوتر ذخیره کنیم. در پایان این درس، شما باید بتوانید متغیر تعریف کنید، به آن‌ها مقدار اولیه بدهید و مقادیرشان را تغییر دهید.

---

### 🧠 توضیح مفهومی ساده و روان:

تصور کنید در آشپزخانه مشغول پخت یک کیک هستید. شما به مواد اولیه (مثل آرد، شکر و تخم مرغ) نیاز دارید.

**متغیرها** دقیقاً مثل **ظرف‌های برچسب‌دار** در آشپزخانه شما هستند.

1. **اعلام متغیر (Declaration):** وقتی می‌گویید: "یک ظرف برای آرد نیاز دارم!"، در واقع دارید متغیر را *اعلام* می‌کنید. ما با کلمه `let` (به معنی "بگذار") این کار را در جاوااسکریپت انجام می‌دهیم.

2. **مقداردهی (Initialization/Assignment):** وقتی آرد را داخل ظرف می‌ریزید، در واقع دارید به متغیر *مقدار* می‌دهید.

3. **متغیر بودن:** چون ظرف‌ها در جاوااسکریپت (به خصوص با `let` و `var`) موقت هستند، می‌توانید بعداً محتوای آن‌ها را عوض کنید. مثلاً شکر را خالی کنید و به جای آن نمک بریزید (البته امیدوارم این کار را با کیک واقعی انجام ندهید!).

متغیرها به ما کمک می‌کنند تا داده‌هایی که با آن‌ها کار می‌کنیم (مثلاً نمرهٔ یک دانش‌آموز یا نام یک کاربر) را با یک اسم مشخص، در حافظه ذخیره کنیم تا بتوانیم بعداً به آن‌ها دسترسی پیدا کرده یا آن‌ها را تغییر دهیم.

---

### ⚙️ آموزش گام‌به‌گام با همه مفاهیم و زیر‌بخش‌ها:

#### ۱. اعلان متغیر (Declaring Variables)

برای اینکه به کامپیوتر بگوییم "یک ظرف جدید برای داده‌ها کنار بگذار"، باید متغیر را اعلام کنیم. در جاوااسکریپت برای این کار از کلمات کلیدی `let` یا `var` استفاده می‌کنیم.

**نکته مهم:** کلمات کلیدی مانند `let` و `var` جزء **سینتکس** زبان برنامه‌نویسی هستند و به مفسر جاوااسکریپت (Interpreter) می‌گویند که باید فضای حافظه را رزرو کند.

#### ۲. معرفی `let` و `var`

* **`let`:** این کلمه کلیدی از نسخه ECMAScript 2015 (ES2015) معرفی شد و توصیه می‌شود که همیشه از آن برای تعریف متغیرهای قابل تغییر استفاده کنید.

* **`var`:** این کلمه کلیدی قدیمی‌تر است و در کدهای قدیمی‌تر زیاد دیده می‌شود. اگر محیط جاوااسکریپت شما از نسخه‌های جدید پشتیبانی می‌کند، بهتر است از `let` استفاده کنید.

💻 **نمونه کد ۱: اعلان با `let`**

```javascript
let firstName;
let lastName;
// این کد دو متغیر به نام‌های firstName و lastName اعلام می‌کند، 
// اما هنوز هیچ مقداری در آن‌ها ذخیره نشده است.
```

#### ۳. حالت سخت‌گیرانه (`Strict Mode`)

جاوااسکریپت برخی ویژگی‌های خاص دارد که ممکن است منجر به خطاهای دشوار شود. برای جلوگیری از این مشکلات، می‌توانید **حالت سخت‌گیرانه** (Strict Mode) را فعال کنید.

با فعال‌سازی این حالت، شما در واقع از یک «زیرمجموعه تمیزتر» از جاوااسکریپت استفاده می‌کنید که از برخی خطاهای رایج جلوگیری می‌کند.

* **نحوه فعال‌سازی:** با نوشتن دستور `'use strict';` در ابتدای کل اسکریپت یا در ابتدای یک تابع، آن بخش را وارد حالت سخت‌گیرانه می‌کنید.

💻 **نمونه کد ۲: استفاده از `Strict Mode`**

```javascript
'use strict'; 
let firstName;
let lastName;
// حالت سخت‌گیرانه فعال شد تا از خطاهای احتمالی جلوگیری شود.
```

#### ۴. مقداردهی و تخصیص (Initialization and Assignment)

پس از اعلام متغیر، می‌توانیم با استفاده از عملگر تخصیص (`=`) یک مقدار مشخص به آن بدهیم (مقداردهی اولیه).

💻 **نمونه کد ۳: مقداردهی اولیه**

```javascript
let firstName = 'Max';
// متغیر firstName اعلام و بلافاصله با رشته‌ی 'Max' مقداردهی شد.
```

شما می‌توانید در یک دستور، چندین متغیر را هم اعلام و مقداردهی کنید:

```javascript
let firstName = 'Max', lastName = 'Mustermann';
// دو متغیر در یک خط اعلام و مقداردهی شدند.
```

برای خوانایی بهتر، معمولاً توصیه می‌شود این کار را در چند خط انجام دهید:

```javascript
let firstName = 'Max', 
    lastName = 'Mustermann'; // ... و اینجا یک متغیر دیگر.
```

#### ۵. متغیرها قابل تغییر هستند (Mutability)

نکته کلیدی در مورد متغیرهایی که با `let` یا `var` تعریف می‌شوند این است که مقدار آن‌ها می‌تواند بعداً تغییر کند.

💻 **نمونه کد ۴: تغییر مقدار متغیر (Listing 3.6)**

```javascript
let x = 4711; 
console.log(x); // خروجی: 4711

x = 5; 
console.log(x); // خروجی: 5
```

در کد بالا، متغیر `x` ابتدا با مقدار ۴۷۱۱ پر شد و سپس با مقدار ۵ **بازنویسی** شد.

---

### 💻 همه کدها و مثال‌های کتاب را بازسازی و خط‌به‌خط توضیح بده:

در این بخش، کدهای کلیدی که مربوط به معرفی متغیرها (`let` و `var`) در صفحات ۸۵ تا ۸۷ است، بازسازی و شرح داده شده است.

#### مثال ۱: اعلان ساده (Listing 3.2)

```javascript
let firstName;
let lastName;
// توضیحات: دو متغیر firstName و lastName تعریف شده‌اند. 
// از آنجایی که مقداردهی نشده‌اند، مقدار آن‌ها فعلاً undefined است.
```

#### مثال ۲: اعلان در حالت سخت‌گیرانه (Listing 3.3)

```javascript
'use strict'; 
let firstName;
let lastName;
// توضیحات: سینتکس 'use strict'; در ابتدای کد، قوانین سخت‌گیرانه‌تری را
// برای جلوگیری از خطاهای پنهان در جاوااسکریپت فعال می‌کند.
```

#### مثال ۳: تعریف و مقداردهی در یک خط

```javascript
let firstName = 'Max', lastName = 'Mustermann';
// توضیحات: مقداردهی اولیه متغیرها همزمان با اعلان انجام شده است.
```

#### مثال ۴: تغییر مقدار (قابلیت متغیر بودن) (Listing 3.6)

```javascript
let x = 4711; 
console.log(x); // خروجی: 4711
// توضیحات: متغیر x با 4711 مقداردهی و چاپ شد.

x = 5; 
console.log(x); // خروجی: 5
// توضیحات: مقدار متغیر x به 5 تغییر داده شد و دوباره چاپ گردید. 
// این قابلیت "متغیر" بودن (variable) را نشان می‌دهد.
```

---

### 📊 نمودارها و جداول را به‌صورت Markdown بازسازی کن:

#### جدول ۱: اصطلاحات کلیدی متغیرها

|   اصطلاح (فارسی)   | اصطلاح (انگلیسی) |            شرح ساده            |     کلمه کلیدی    |
| :----------------: | :--------------: | :----------------------------: | :---------------: |
|      **اعلان**     |    Declaration   |     معرفی نام متغیر به مفسر    |   `let` یا `var`  |
|      **تخصیص**     |    Assignment    |   قرار دادن یک مقدار در متغیر  |        `=`        |
| **مقداردهی اولیه** |  Initialization  | تخصیص مقدار در همان لحظه اعلان |    `let x = 5;`   |
|    **بازنویسی**    |   Reassignment   |  تغییر مقدار متغیر پس از تعریف | (بدون کلمه کلیدی) |

#### جدول ۲: مقایسه اولیه `let` و `var` (در صفحات ۸۵-۸۷)

|          ویژگی         |             `let` (جدید)             |            `var` (قدیمی)            |
| :--------------------: | :----------------------------------: | :---------------------------------: |
|    **معرفی شده در**    |          ES2015 (نسخه جدید)          |      نسخه‌های اولیه جاوااسکریپت     |
|    **وضعیت استفاده**   | توصیه شده (برای متغیرهای قابل تغییر) | بهتر است در کدهای جدید استفاده نشود |
| **قابلیت تغییر مقدار** |          بله (قابل بازنویسی)         |         بله (قابل بازنویسی)         |

#### جدول ۳: کلمات کلیدی جاوااسکریپت (Schlüsselwörter)

کلمات کلیدی (مانند `let`, `var`, `const`) جزء مهم سینتکس هستند و برای مفسر جاوااسکریپت معنی خاصی دارند. از این رو نمی‌توان از آن‌ها به عنوان نام متغیر استفاده کرد.

| کلمه کلیدی (مثال در محدوده درس) |                            نقش                           |
| :-----------------------------: | :------------------------------------------------------: |
|              `let`              |           اعلان متغیرهای قابل تغییر (Variable)           |
|              `var`              |     اعلان متغیرهای قابل تغییر (Variable) (شیوه قدیمی)    |
|             `const`             | اعلان ثابت‌ها (Constant) (مفهوم ذکر شده در محدوده صفحات) |

---

### 💬 نکات طلایی استاد و اشتباهات رایج:

به عنوان یک استاد با تجربه، سه نکته مهم را در مورد متغیرها به شما گوشزد می‌کنم:

1. **اولویت با `let` است:** در کدهای مدرن جاوااسکریپت، از `var` اجتناب کنید. `let` دارای حوزه (Scope) بهتری است (که بعداً دقیق‌تر می‌خوانیم) و از مشکلاتی که `var` در کدهای بزرگ ایجاد می‌کند، جلوگیری می‌کند.

2. **از تعریف بدون کلمه کلیدی دوری کنید:** هرگز نباید متغیری را بدون `let`، `var` یا `const` تعریف کنید (مثل `x = 5;`). این کار ناخواسته یک متغیر **عمومی (Global)** ایجاد می‌کند و ممکن است متغیرهای موجود در کتابخانه‌های دیگر را بازنویسی کند. اگر از `'use strict';` استفاده کنید، جاوااسکریپت در این حالت خطا می‌دهد!

3. **انتخاب درست:** عادت کنید که از همین حالا بدانید چه زمانی از `let` و چه زمانی از `const` استفاده کنید. قانون ساده من:

   * اگر مقدار متغیر قرار است در آینده تغییر کند (مثل شمارنده حلقه‌ها)، از **`let`** استفاده کنید.

   * در **تمام موارد دیگر**، از **`const`** استفاده کنید. (جزئیات `const` در درس‌های آینده می‌آید، اما این قانون را به خاطر بسپارید.)

---

### 🧪 تمرین درس:

این تمرین‌ها را در مرورگر یا محیط Node.js اجرا کنید تا مفاهیم برایتان تثبیت شوند:

**تمرین ۱: اعلان و مقداردهی جداگانه**

دو متغیر به نام‌های `city` و `country` با استفاده از `let` اعلام کنید. سپس در خطوط بعدی به ترتیب مقادیر 'Tehran' و 'Iran' را به آن‌ها تخصیص دهید.

**تمرین ۲: حالت سخت‌گیرانه**

کدی بنویسید که در حالت سخت‌گیرانه فعال شود و سپس متغیر `age` را با مقدار ۲۲ تعریف کنید.

**تمرین ۳: بازنویسی (Reassignment)**

یک متغیر `score` با مقدار اولیه ۱۰۰ تعریف کنید. سپس در یک خط دیگر، مقدار آن را به ۸۵ تغییر دهید. خروجی `console.log(score)` قبل و بعد از تغییر چه خواهد بود؟

**تمرین ۴: خطای سینتکسی**

چرا کد زیر در جاوااسکریپت خطا می‌دهد؟

```javascript
let my Variable; // (فضای خالی)
```

**تمرین ۵: استفاده همزمان**

متغیرهای `length` و `width` را همزمان در یک دستور با استفاده از `let` تعریف کرده و به ترتیب مقادیر ۱۰ و ۵ را به آن‌ها بدهید.

**تمرین ۶: متغیر غیرمجاز**

آیا می‌توانید متغیری به نام `let` تعریف کنید؟ چرا؟


**تمرین ۷: نام‌های توصیفی**

فرض کنید می‌خواهید نام و نام خانوادگی یک کاربر را ذخیره کنید. متغیرهای خود را با رعایت قانون **CamelCase** تعریف کنید.

**تمرین ۸: تشخیص متغیر عمومی**

کد زیر چه مشکلی از دیدگاه توسعه حرفه‌ای دارد؟

```javascript
'use strict';
var username = 'Guest'; 
// مشکل چیست؟ 
```

---

### 💡 یک پروژه یا مثال کاربردی: ماشین حساب امتیازدهی ساده

بیایید یک سیستم امتیازدهی ساده برای یک بازی بسازیم که از متغیرهای قابل تغییر استفاده می‌کند.

این مثال نشان می‌دهد که چطور امتیاز یک بازیکن (`playerScore`) در طول بازی تغییر می‌کند:

```javascript
// 1. اعلام حالت سخت‌گیرانه
'use strict'; 

// 2. اعلام متغیر برای ذخیره امتیاز اولیه بازیکن
let playerScore = 0; 
console.log(`امتیاز شروع: ${playerScore}`); // خروجی: 0

// 3. بازیکن اولین امتیاز را کسب می‌کند
playerScore = 10;
console.log(`امتیاز پس از مرحله ۱: ${playerScore}`); // خروجی: 10

// 4. بازیکن مجدداً امتیاز کسب می‌کند. برای سادگی، امتیاز جدید را به قبلی اضافه می‌کنیم
playerScore = playerScore + 5; 
console.log(`امتیاز پس از مرحله ۲: ${playerScore}`); // خروجی: 15

// 5. متغیر را برای نام بازیکن استفاده می‌کنیم
let playerName = 'TurboMax';
console.log(`بازیکن ${playerName} هم اکنون ${playerScore} امتیاز دارد.`);
```

**توضیح:** این مثال به خوبی نشان می‌دهد که متغیر `playerScore` چطور می‌تواند در زمان اجرای برنامه با استفاده از عملگر تخصیص (`=`) چندین بار مقدار جدید بگیرد و به‌روز شود.

---

### 🧾 خلاصه (Cheat Sheet): جدول نکات کلیدی.

|        مفهوم        |       سینتکس       |         مثال        |                   شرح                   |
| :-----------------: | :----------------: | :-----------------: | :-------------------------------------: |
|   **اعلان با let**  |     `let name;`    |     `let score;`    |      روش توصیه شده برای تعریف متغیر     |
|   **اعلان با var**  |     `var name;`    |   `var oldScore;`   |       روش قدیمی، کمتر توصیه می‌شود      |
|     **مقداردهی**    |   `name = value;`  |    `score = 20;`    |           تخصیص مقدار به متغیر          |
| **مقداردهی همزمان** |    `let n = v;`    | `let x = 1, y = 2;` |       اعلان و مقداردهی در یک دستور      |
|   **Strict Mode**   |   `'use strict';`  |   `'use strict';`   | فعال‌سازی قوانین سخت‌گیرانه جاوااسکریپت |
|   **تغییر مقدار**   | `name = newValue;` |    `score = 50;`    |            تغییر مقدار متغیر            |

---

### 📚 آزمون پایانی:

#### سؤالات:

1. کدام کلمه کلیدی برای تعریف متغیرهای قابل تغییر در جاوااسکریپت، بیشتر توصیه می‌شود؟

   الف) `const`

   ب) `var`

   ج) `let`

   د) `variable`

2. کدام دستور برای فعال‌سازی حالت سخت‌گیرانه (`Strict Mode`) استفاده می‌شود؟

3. "اعلان متغیر" به چه معناست؟

   الف) قرار دادن مقدار در متغیر

   ب) تغییر مقدار متغیر

   ج) معرفی نام متغیر به مفسر
   
   د) چاپ متغیر در کنسول

4. اگر متغیری با `let` تعریف شده باشد، آیا می‌توان مقدار آن را بعداً تغییر داد؟

   الف) خیر، فقط ثابت‌ها قابل تغییرند.

   ب) بله، زیرا `let` برای متغیرهای قابل تغییر استفاده می‌شود.

5. کدام عملگر برای "تخصیص" (Assignment) یک مقدار به متغیر استفاده می‌شود؟

   الف) `==`

   ب) `===`

   ج) `=`

   د) `!=`

6. اگر یک متغیر با `let` تعریف شود اما مقداردهی نشود، مقدار اولیه آن چیست؟

7. چرا توسعه‌دهندگان حرفه‌ای توصیه می‌کنند که متغیرها را بدون استفاده از هیچ کلمه کلیدی (مثل `x = 10;`) تعریف نکنیم؟

8. اگر بخواهیم در یک خط دو متغیر `length` و `height` را با مقادیر ۲ و ۳ تعریف کنیم، سینتکس صحیح چیست؟

9. اگر `'use strict';` فعال باشد و ما سعی کنیم متغیری را بدون `let` یا `var` تعریف کنیم، چه اتفاقی می‌افتد؟

10. عبارت زیر را تحلیل کنید:

    `let bookTitle = 'JS Handbook'; bookTitle = 'New JS Book';`

    الف) این یک خطا است.

    ب) این کد مجاز است و مقدار `bookTitle` بازنویسی می‌شود.

#### پاسخنامه تشریحی:

1. **ج) `let`**: `let` روش مدرن و توصیه شده برای تعریف متغیرهای قابل تغییر است.

2. **`'use strict';`**: این دستور باید در ابتدای اسکریپت یا تابع قرار گیرد.

3. **ج) معرفی نام متغیر به مفسر**: اعلان، صرفاً رزرو فضای نام است.

4. **ب) بله، زیرا `let` برای متغیرهای قابل تغییر استفاده می‌شود**: متغیرها (variables) ذاتاً به همین دلیل نامگذاری شده‌اند.

5. **ج) `=`**: این عملگر تخصیص (Assignment Operator) است.

6. **`undefined`**: جاوااسکریپت به طور پیش‌فرض به آن مقدار نامشخص (undefined) می‌دهد.

7. **این کار متغیر عمومی (Global) می‌سازد و ممکن است منجر به بازنویسی ناخواسته متغیرهای موجود در کتابخانه‌های دیگر شود**. حالت سخت‌گیرانه این مشکل را به عنوان خطا گزارش می‌دهد.

8. **`let length = 2, height = 3;`**: با استفاده از کاما می‌توان چندین متغیر را تعریف کرد.

9. **جاوااسکریپت یک خطا (`ReferenceError` یا خطا سینتکسی) اعلام می‌کند**: حالت سخت‌گیرانه از ایجاد متغیرهای عمومی تصادفی جلوگیری می‌کند.

10. **ب) این کد مجاز است و مقدار `bookTitle` بازنویسی می‌شود**: این عملکرد اصلی متغیرهای تعریف شده با `let` است.

---
