
### 🧩 درس ۲۰ — آرایه‌ها (Arrays) و لیست‌های مرتب (صفحهٔ ۱۰۶ تا ۱۱۲)

این درس بر روی نحوهٔ تعریف، ساختار و دستکاری آرایه‌ها به عنوان ساختارهای دادهٔ اصلی برای ذخیره‌سازی لیست‌های مرتب‌شده تمرکز دارد [۶۵۴].

### 🎯 هدف درس

هدف اصلی این درس این است که شما:

1. درک کنید که آرایه چیست و چگونه به عنوان یک "لیست مرتب‌شده" در جاوااسکریپت عمل می‌کند [۶۵۴].

2. با مفهوم اندیس (Index) و اهمیت اندیس‌گذاری صفر (Zero-indexing) آشنا شوید.

3. نحوهٔ ایجاد و مقداردهی اولیه به آرایه‌ها را بیاموزید.

4. بتوانید طول یک آرایه را بررسی کرده و عناصر آن را با متدهای اساسی دستکاری کنید.

---

### 🧠 توضیح مفهومی ساده و روان با مثال‌های واقعی

آرایه‌ها را می‌توان شبیه به **لیست خرید** در نظر گرفت که در آن هر قلم جنس در یک جایگاه مشخص (با شماره) قرار دارد.

فرض کنید یک لیست خرید برای شام دارید:

* موز

* شیر

* نان

اگر این لیست را به یک آرایه تبدیل کنیم، ساختار زیر را خواهد داشت:

| جایگاه (اندیس) | آیتم |
| :------------: | :--: |
|        ۰       |  موز |
|        ۱       |  شیر |
|        ۲       |  نان |

1. **مرتب بودن (Geordnet):** 
مهم است که بدانید کدام آیتم، آیتم اول است (موز در جایگاه ۰) [۶۵۴].

2. **اندیس صفر (Zero-Indexing):**
 در جاوااسکریپت و بیشتر زبان‌های برنامه‌نویسی، شمارش از **صفر** شروع می‌شود. اگر لیست شما ۳ آیتم دارد، اندیس‌های آن ۰، ۱ و ۲ خواهند بود.

بنابراین، آرایه یک نوع دادهٔ مرجع (Reference Type) است که به ما امکان می‌دهد تعداد زیادی از مقادیر را زیر یک نام متغیر واحد مدیریت کنیم.

---

### ⚙️ آموزش گام‌به‌گام با همه مفاهیم و زیر‌بخش‌ها

#### ۱. تعریف و ایجاد آرایه‌ها

شما می‌توانید آرایه‌ها را به دو روش اصلی تعریف کنید. روش رایج‌تر و توصیه شده، استفاده از **نحو لیترال (Literal Syntax)** است.

##### الف) نحو لیترال (Literal Syntax)

این ساده‌ترین و پرکاربردترین روش است که از براکت‌های مربع (`[]`) استفاده می‌کند:

**💻 مثال ۱: تعریف آرایهٔ لیست کارها**

```javascript
const todoList = [ 
    'Bad putzen',    // اندیس 0
    'Einkaufen',     // اندیس 1
    'Aufräumen'      // اندیس 2
];
```

##### ب) استفاده از تابع سازنده (Constructor Function)

می‌توانید از تابع سازندهٔ `Array` استفاده کنید. اگر یک آرگومان عددی به آن بدهید، آرایه‌ای با آن طول خالی ایجاد می‌کند [۱۹۶]:

**💻 مثال ۲: استفاده از سازنده**

```javascript
// آرایه‌ای با طول 20 ایجاد می‌کند که تمام خانه‌های آن خالی (empty) هستند.
const names = new Array(20); 

// آرایه‌ای با عناصر مشخص ایجاد می‌کند.
const names = new Array('Max', 'Moritz', 'Peter'); [۱۹۶]
```

اگر از قبل تعداد مقادیری را که قرار است در آرایه ذخیره شوند می‌دانید، می‌توانید این تعداد را به تابع سازنده بدهید، اما باید توجه داشت که آرایه‌ها در جاوااسکریپت به صورت پویا رشد می‌کنند [۱۹۶].

#### ۲. دسترسی به عناصر (Indexing)

دسترسی به هر عنصر در آرایه با استفاده از اندیس آن عنصر در داخل براکت‌های مربع (`[]`) امکان‌پذیر است [۱۹۷].

**💻 مثال ۳: دسترسی به عناصر لیست کارها**

```javascript
const todoList = ['Bad putzen', 'Einkaufen', 'Aufräumen']; 

console.log(todoList); // خروجی: Bad putzen
console.log(todoList); // خروجی: Aufräumen

// اگر اندیسی وجود نداشته باشد (مثلاً اندیس 5 در آرایه 3 عنصری)
console.log(todoList); // خروجی: undefined [۱۹۷]
```

#### ۳. محاسبهٔ طول آرایه (`length`)

خاصیت `length` تعداد عناصر موجود در آرایه را برمی‌گرداند [۱۹۸, ۱۲۶]. این مقدار همیشه یک واحد بیشتر از بزرگترین اندیس قابل قبول است.

**💻 مثال ۴: استفاده از length**

```javascript
const todoList = ['Bad putzen', 'Einkaufen', 'Aufräumen']; 
console.log(todoList.length); // خروجی: 3

// دسترسی به آخرین عنصر با استفاده از length
const lastItem = todoList[todoList.length - 1];
console.log(lastItem); // خروجی: Aufräumen
```

#### ۴. افزودن عناصر به آرایه

آرایه‌ها مجموعه‌ای پویا هستند و می‌توان عناصر جدیدی به ابتدا یا انتهای آن‌ها اضافه کرد.

##### الف) افزودن به انتها (`push()`)

متد `push()` یک یا چند عنصر را به انتهای آرایه اضافه می‌کند و **طول جدید** آرایه را برمی‌گرداند [۱۹۸].

**💻 مثال ۵: استفاده از push()**

```javascript
const todoList = []; 
let length;

length = todoList.push('Bad putzen'); 
console.log(length); // 1 [۱۹۸]

length = todoList.push('Einkaufen');
console.log(length); // 2 [۱۹۸]

length = todoList.push('Aufräumen', 'Rasen mähen'); 
console.log(length); // 4 [۱۹۸]

console.log(todoList); // ["Bad putzen", "Einkaufen", "Aufrämen", "Rasen mähen"]
```

##### ب) افزودن به ابتدا (`unshift()`)

متد `unshift()` یک یا چند عنصر را به ابتدای آرایه اضافه می‌کند و اندیس‌های عناصر موجود را جابه‌جا می‌کند [۱۹۹]. این متد نیز طول جدید آرایه را برمی‌گرداند [۱۹۹].

**💻 مثال ۶: استفاده از unshift()**

```javascript
const todoList = ['Einkaufen', 'Bad putzen'];
let length = todoList.unshift('Aufräumen', 'Rasen mähen');
console.log(length); // 4 [۱۹۹]
console.log(todoList); // ["Aufräumen", "Rasen mähen", "Einkaufen", "Bad putzen"] [۱۹۹]
```

#### ۵. حذف عناصر از آرایه

##### الف) حذف از انتها (`pop()`)

متد `pop()` آخرین عنصر از آرایه را حذف کرده و **آن عنصر حذف شده** را برمی‌گرداند. اگر آرایه خالی باشد، `undefined` برمی‌گرداند [۲۰۱].

**💻 مثال ۷: استفاده از pop()**

```javascript
const todoList = ['Bad putzen', 'Einkaufen', 'Aufräumen']; 

const item1 = todoList.pop(); 
console.log(item1); // خروجی: Aufräumen [۲۰۱]

console.log(todoList.length); // خروجی: 2 
```

##### ب) حذف از ابتدا (`shift()`)

متد `shift()` اولین عنصر از آرایه را حذف کرده و اندیس‌های باقی‌مانده را به جلو می‌کشد [۱۹۷]. این متد نیز عنصر حذف شده را برمی‌گرداند.

**💻 مثال ۸: استفاده از shift()**

```javascript
const todoList = ['Bad putzen', 'Einkaufen']; 

const item = todoList.shift(); 
console.log(item); // خروجی: Bad putzen [۱۹۷]

console.log(todoList.length); // خروجی: 1
```

#### ۶. آرایه‌های چندبعدی (Multidimensional Arrays)

آرایه‌ها می‌توانند حاوی عناصر دیگری باشند که خودشان آرایه هستند. به این ساختار، آرایهٔ چندبعدی (Multidimensional Array) گفته می‌شود. برای دسترسی به مقادیر، باید از چندین اندیس پشت سر هم استفاده کرد [۷۴].

**💻 مثال ۹: دسترسی به آرایهٔ چندبعدی (از مثال سبد خرید)**

فرض کنید `shoppingCart` یک آرایهٔ چندبعدی است که شامل نام محصول، قیمت، و تعداد است [۷۳].

```javascript
const shoppingCart = [ 
    ['Plattenspieler', 200, 1],
    ['Lautsprecher', 400, 2]
];

// دسترسی به اولین عنصر (Plattenspieler) در آرایهٔ اول [۷۴]
console.log(shoppingCart); // خروجی: Plattenspieler 

// دسترسی به دومین عنصر (2) در آرایهٔ دوم [۷۴]
console.log(shoppingCart); // خروجی: 2 
```

---

### 📊 نمودارها و جداول (بازسازی شده در قالب Markdown)

#### جدول ۱: روش‌های ایجاد آرایه

| روش                  | نحو (Syntax)  | توضیحات                                       |  منبع |
| :------------------- | :------------ | :-------------------------------------------- | :---: |
| لیترال (Literal)     | `[]`          | رایج‌ترین و توصیه‌شده‌ترین روش.               |       |
| سازنده (Constructor) | `new Array()` | ایجاد یک آرایهٔ خالی یا آرایه‌ای با طول مشخص. | [۱۹۶] |

#### جدول ۲: متدهای اصلی دستکاری عناصر

|     متد     |      کارکرد     | محل تغییر |  مقدار بازگشتی |  منبع |
| :---------: | :-------------: | :-------: | :------------: | :---: |
|   `push()`  | اضافه کردن عنصر |   انتها   | طول جدید آرایه | [۱۹۸] |
|   `pop()`   |     حذف عنصر    |   انتها   |  عنصر حذف شده  | [۲۰۱] |
| `unshift()` | اضافه کردن عنصر |   ابتدا   | طول جدید آرایه | [۱۹۹] |
|  `shift()`  |     حذف عنصر    |   ابتدا   |  عنصر حذف شده  | [۱۹۷] |

#### جدول ۳: دسترسی به اندیس و نتایج نامعتبر

|      اندیس     |      تعریف     |   نتیجهٔ دسترسی  |    منبع    |
| :------------: | :------------: | :--------------: | :--------: |
|       ``       |   اولین عنصر   |  مقدار عنصر اول  |    [۱۹۷]   |
| `[length - 1]` |   آخرین عنصر   | مقدار آخرین عنصر |            |
|   `[length]`   | خارج از محدوده |    `undefined`   | [۱۹۷, ۲۱۱] |

#### جدول ۴: ساختار آرایهٔ چندبعدی (مثال سبد خرید)

| اندیس اول (محصول) | اندیس دوم (ویژگی) |          مقدار         | منبع |
| :---------------: | :---------------: | :--------------------: | :--: |
|         ``        |         ``        | 'Plattenspieler' (نام) | [۷۴] |
|         ``        |         ``        |      `200` (قیمت)      | [۷۴] |
|         ``        |         ``        |       `2` (تعداد)      | [۷۴] |

---

### 💬 نکات طلایی استاد و اشتباهات رایج

1. **اندیس صفر را فراموش نکنید!**
 این رایج‌ترین اشتباه است. اگر یک آرایه ۳ عنصری دارید، اندیس‌ها از ۰ تا ۲ هستند. تلاش برای دسترسی به اندیس ۳، مقدار `undefined` را برمی‌گرداند [۱۹۷].
 
2. **`push` در برابر `length`:**
 متد `push()` بعد از اضافه کردن عنصر، *طول جدید آرایه* را برمی‌گرداند [۱۹۸]. اگر می‌خواهید عنصر اضافه شده را ببینید، باید مستقیماً آرایه را چاپ کنید، نه نتیجهٔ `push()` را.

3. **تبدیل ضمنی هنگام دسترسی:**
 اگر برای دسترسی به اندیس از یک مقدار غیر عددی استفاده کنید (مثلاً یک رشتهٔ عددی مثل `"1"`)، جاوااسکریپت تلاش می‌کند آن را به یک عدد تبدیل کند. همیشه اندیس‌ها را به صورت عدد وارد کنید تا از تبدیل‌های ناخواسته جلوگیری شود.

4. **ماهیت مرجع (Reference Type):**
 آرایه‌ها جزو انواع دادهٔ مرجع (Objects) هستند. این بدان معناست که اگر یک آرایه را به متغیر دیگری اختصاص دهید (`arr2 = arr1`)، هر دو متغیر به *یک آرایه* در حافظه اشاره می‌کنند [۱۸۲]. تغییر یکی، دیگری را نیز تغییر می‌دهد.

---

### 🧪 تمرین‌ها

#### تمرین ۱: دسترسی و طول (اجباری)

آرایه‌ای از ماه‌های سال (فروردین، اردیبهشت، خرداد) ایجاد کنید.

الف) عنصر دوم (اردیبهشت) را چاپ کنید.

ب) طول آرایه را چاپ کنید.

ج) تلاش کنید به عنصر با اندیس `طول آرایه` دسترسی پیدا کنید. خروجی چیست؟

#### تمرین ۲: افزودن عناصر (اجباری)

به آرایهٔ `let shoppingList = ['Apple', 'Banana'];`

الف) با استفاده از `push()` عنصر 'Cherry' را اضافه کنید. طول جدید چقدر است؟

ب) با استفاده از `unshift()` عنصر 'Date' را به ابتدای لیست اضافه کنید.

#### تمرین ۳: حذف عناصر (اجباری)

کد زیر را اجرا کنید و خروجی `deletedItem` و `myArray` در انتهای کار را مشخص کنید:

```javascript
let myArray = ['A', 'B', 'C', 'D'];
const deletedItem = myArray.pop();
myArray.shift();
```

#### تمرین ۴: آرایهٔ چندبعدی (اجباری)

آرایهٔ چندبعدی زیر نشان‌دهندهٔ مختصات جغرافیایی است: `const points = [,];`
به مختصات y از نقطهٔ اول (یعنی ۲۰) دسترسی پیدا کرده و آن را چاپ کنید.

#### تمرین ۵: مقدار بازگشتی `push` (تکمیلی)

متغیری به نام `newLength` تعریف کنید و نتیجهٔ `push('X')` را در آن ذخیره کنید. اگر آرایه اولیه `['A', 'B']` باشد، مقدار `newLength` چقدر است؟

#### تمرین ۶: `pop` از آرایهٔ خالی (تکمیلی)

اگر متد `pop()` را روی یک آرایهٔ کاملاً خالی اجرا کنید، خروجی چه خواهد بود؟ [۲۰۱]

#### تمرین ۷: دسترسی با متغیر (تکمیلی)

متغیری به نام `indexToAccess` را برابر با `1` تعریف کنید. چگونه می‌توانید با استفاده از این متغیر به عنصر دوم یک آرایهٔ دلخواه دسترسی پیدا کنید؟

#### تمرین ۸: تعریف با سازنده (تکمیلی)

اگر `const emptyArray = new Array(5);` را تعریف کنید، و سپس `emptyArray` را چاپ کنید، و در نهایت `emptyArray.length` را چاپ کنید، خروجی‌ها چه خواهند بود؟

---

### 💡 یک پروژه یا مثال کاربردی: مدیریت لیست پخش (Playlist)

می‌خواهیم یک لیست پخش (Playlist) ساده برای یک برنامهٔ موسیقی بسازیم و آهنگ‌ها را با متدهای اصلی آرایه مدیریت کنیم.

```javascript
// 1. ایجاد لیست پخش اولیه (Initial Playlist)
let playlist = ['Stairway to Heaven', 'Bohemian Rhapsody', 'Hotel California'];

function displayPlaylist() {
    console.log("--- لیست پخش فعلی ---");
    // از متد forEach (که در فصول بعدی خواهید آموخت) برای نمایش استفاده می‌کنیم.
    playlist.forEach((song, index) => { 
        console.log(`${index + 1}. ${song}`);
    });
}

// 2. افزودن یک آهنگ جدید به انتها
console.log("\nافزودن آهنگ جدید به انتها:");
playlist.push('Imagine'); [۱۹۸]
displayPlaylist();

// 3. حذف اولین آهنگ (چون قدیمی شده است)
console.log("\nحذف اولین آهنگ:");
const removedFirstSong = playlist.shift(); [۱۹۷]
console.log(`آهنگ حذف شده: ${removedFirstSong}`);
displayPlaylist();

// 4. اضافه کردن یک آهنگ فوری به ابتدا
console.log("\nاضافه کردن آهنگ فوری به ابتدا:");
playlist.unshift('Yesterday'); [۱۹۹]
displayPlaylist();

// 5. حذف آخرین آهنگ (و برگرداندن آن)
console.log("\nحذف آخرین آهنگ:");
const removedLastSong = playlist.pop(); [۲۰۱]
console.log(`آهنگ حذف شده: ${removedLastSong}`);
displayPlaylist();

console.log(`\nطول نهایی لیست پخش: ${playlist.length}`);
```

---

### 🧾 خلاصه (Cheat Sheet)

| مفهوم           | ساختار/نحو                            | توضیح                                           |    منبع    |
| :-------------- | :------------------------------------ | :---------------------------------------------- | :--------: |
| تعریف آرایه     | `[]` یا `new Array()`                 | لیستی از مقادیر مرتب شده [۶۵۴].                 |    [۱۹۶]   |
| اندیس‌گذاری     | `array[index]`                        | شروع از ۰؛ برای دسترسی به عناصر [۱۹۷].          |    [۱۹۷]   |
| طول             | `array.length`                        | تعداد عناصر در آرایه [۱۹۸].                     |    [۱۲۰]   |
| افزودن به انتها | `array.push(item)`                    | عنصر را به آخر اضافه و طول جدید را برمی‌گرداند. |    [۱۹۸]   |
| حذف از انتها    | `array.pop()`                         | عنصر آخر را حذف و برمی‌گرداند [۲۰۱].            |    [۲۰۱]   |
| افزودن به ابتدا | `array.unshift(item)`                 | عنصر را به اول اضافه و طول جدید را برمی‌گرداند. |    [۱۹۹]   |
| حذف از ابتدا    | `array.shift()`                       | عنصر اول را حذف و برمی‌گرداند [۱۹۷].            |    [۱۹۷]   |
| اندیس نامعتبر   | `array[X]` (که X بزرگتر از طول-۱ است) | برمی‌گرداند `undefined` [۱۹۷, ۲۱۱].             | [۱۹۷, ۲۱۱] |

---

### 📚 آزمون پایانی (۱۰ سؤال)

**۱. مفهوم اصلی:** آرایه‌ها در جاوااسکریپت، به طور عمده برای ذخیره‌سازی چه نوع داده‌هایی استفاده می‌شوند؟

الف) ساختارهای کلید-مقدار (Key-Value Structures)

ب) داده‌های نامرتب

ج) لیست‌های مرتب‌شده (Geordnete Listen) [۶۵۴]

د) فقط اعداد صحیح

**۲. اندیس‌گذاری:** اندیس اولین عنصر در یک آرایهٔ جاوااسکریپت چقدر است؟

الف) ۱

ب) ۰

ج) -۱

د) ۲

**۳. متد `push()`:** متد `push()` در آرایه چه چیزی را برمی‌گرداند [۱۹۸]؟

الف) عنصر اضافه شده

ب) عنصر حذف شده

ج) طول جدید آرایه [۱۹۸]

د) `undefined`

**۴. خروجی کد:** خروجی `console.log(myArray)` برای آرایهٔ `const myArray = ['A', 'B', 'C'];` چیست [۱۹۷, ۲۱۱]؟

الف) `undefined`

ب) `C`

ج) `Error`

د) `A`

**۵. حذف از ابتدا:** کدام متد برای حذف اولین عنصر از یک آرایه و بازگرداندن آن استفاده می‌شود [۱۹۷]؟

الف) `pop()`

ب) `removeFirst()`

ج) `shift()`

د) `unshift()`

**۶. ایجاد آرایه:** اگر `const arr = new Array(10);` تعریف شود، `arr.length` چقدر است [۱۹۶]؟

الف) ۰

ب) ۱۰

ج) ۱

د) `undefined`

**۷. آرایهٔ چندبعدی:** برای دسترسی به عنصر `'Price'` در ساختار `const item = ['Laptop', ['Blue', 'Price'], 1200];` کدام عبارت صحیح است [۷۴]؟

الف) `item`

ب) `item`

ج) `item`

د) `item`

**۸. عملیات ترکیبی:** اگر `const arr = ['A', 'B', 'C'];` باشد، پس از اجرای `arr.push(arr.shift());` آرایهٔ `arr` در نهایت چه مقادیری خواهد داشت؟

الف) `['B', 'C', 'A']`

ب) `['A', 'B', 'C']`

ج) `['C', 'A', 'B']`

د) `['B', 'C', 'B']`

**۹. حذف از انتها:** کدام متد عنصر آخر را حذف می‌کند و اگر آرایه خالی باشد، `undefined` برمی‌گرداند [۲۰۱]؟

الف) `shift()`

ب) `pop()`

ج) `length`

د) `removeLast()`

**۱۰. `length` و اندیس:** برای دسترسی به آخرین عنصر یک آرایه، باید از اندیس:

الف) `array[array.length]`

ب) `array[array.length + 1]`

ج) `array[array.length - 1]`

د) `array`

---

#### 🌟 پاسخنامهٔ تشریحی

**۱. پاسخ: ج) لیست‌های مرتب‌شده (Geordnete Listen)**

دلیل: آرایه‌ها برای نگهداری و مدیریت دنباله‌ای از داده‌ها به صورت مرتب و اندیس‌گذاری شده استفاده می‌شوند [۶۵۴].


**۲. پاسخ: ب) ۰**

دلیل: جاوااسکریپت از اندیس‌گذاری مبتنی بر صفر (Zero-indexing) استفاده می‌کند.


**۳. پاسخ: ج) طول جدید آرایه**

دلیل: متد `push()` پس از اضافه کردن یک یا چند عنصر، تعداد کل عناصر آرایه (طول جدید) را برمی‌گرداند [۱۹۸].

**۴. پاسخ: الف) `undefined`**

دلیل: طول آرایه ۳ است و اندیس‌ها ۰، ۱، ۲ هستند. اندیس ۳ خارج از محدوده است و تلاش برای دسترسی به آن مقدار `undefined` را برمی‌گرداند [۱۹۷, ۲۱۱].

**۵. پاسخ: ج) `shift()`**

دلیل: متد `shift()` اولین عنصر را حذف می‌کند و اندیس‌های باقی‌مانده را جابه‌جا می‌کند [۱۹۷].

**۶. پاسخ: ب) ۱۰**

دلیل: زمانی که یک عدد به سازندهٔ `new Array()` داده می‌شود، یک آرایه با آن طول ایجاد می‌شود [۱۹۶].

**۷. پاسخ: ب) `item`**

دلیل: `'Price'` در اندیس ۱ آرایهٔ خارجی قرار دارد، و سپس در اندیس ۱ آرایهٔ داخلی (چون از صفر شروع می‌شود).

**۸. پاسخ: الف) `['B', 'C', 'A']`**

دلیل: ابتدا `arr.shift()` اجرا می‌شود، که `A` را حذف کرده و برمی‌گرداند. آرایه اکنون `['B', 'C']` است. سپس `arr.push('A')` اجرا می‌شود و `A` به انتها اضافه می‌شود.

**۹. پاسخ: ب) `pop()`**

دلیل: `pop()` آخرین عنصر را حذف کرده و برمی‌گرداند. اگر آرایه خالی باشد، `undefined` برمی‌گرداند [۲۰۱].

**۱۰. پاسخ: ج) `array[array.length - 1]`**

دلیل: چون اندیس از صفر شروع می‌شود، آخرین عنصر همیشه در جایگاه `طول منهای یک` قرار دارد.
